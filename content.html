<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Atelier Paris Web 2019 - N'ayez plus peur de votre terminal !</title>
    <link rel="stylesheet" href="./css/reveal.css" />
    <link rel="stylesheet" href="./css/theme/night.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/a11y-dark.css" />
    <link rel="stylesheet" href="./css/print/paper.css" type="text/css" media="print" />
    <link rel="stylesheet" href="./_assets/assets/asciinema-2.6.1/asciinema-player.css" />
    <link rel="stylesheet" href="./_assets/template/custom-css.css" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template">## N'ayez plus peur de votre terminal ! üíª
#### par Fran√ßois Dume

<aside class="notes"><p>Bonjour, je m&#39;appelle Fran√ßois Dume. Je vais animer aujourd&#39;hui cet atelier d√©di√© √† l&#39;utilisation du terminal.
Mon objectif est de vous donner envie d&#39;utiliser votre terminal et d√©mystifier certains outils.
Cet atelier est accessible √† des d√©butants. Je pensais au d√©part pr√©senter des outils pour un public interm√©diaire mais en discutant avec certain d&#39;entre vous. On m&#39;a conseill√© de faire un truc accessible. 
Nous commencerons par des choses simples. Nous verrons sur la fin des choses un peu plus complexes.
Je voulais au d√©part faire mes slides dans le terminal (<a href="https://github.com/visit1985/mdp">mdp</a> est chouette) mais je me suis rabattu sur reveal.js.</p>
</aside></script></section><section  data-markdown><script type="text/template">
<!-- .slide: data-background-image="data/milind-kaduskar-pzKb6pAIL94-unsplash.jpg" style="background-color: black;" -->

 * Pr√©sentation ax√©e autour de Bash pour Linux (√ßa fonctionnera peut-√™tre sur d'autres OS/interpr√©teurs)
 * On ne parlera pas de Windows -- .bat -- (m√™me si le terminal s'am√©liore)
 
<aside class="notes"><ul>
<li>c&#39;est le terminal que j&#39;utilise au quotidien<ul>
<li>√ßa fonctionnera s√ªrement sur Mac moins bien sur les vieux Windows</li>
<li>au d√©but on verra des choses assez simples mais √ßa va se complexifier sur la fin</li>
</ul>
</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
### Command line is fun !üéà

<aside class="notes"><p>J&#39;aime beaucoup mon terminal et j&#39;aimerais vous montrer des choses marrantes √† faire. Mais avant de commencer, ...</p>
</aside></script></section><section  data-markdown><script type="text/template">
## Quel temps fait-il aujourd'hui ‚òÄÔ∏è ? 
</script></section><section  data-markdown><script type="text/template">
![capture d'une commande permettant d'afficher la m√©t√©o](./data/capture-meteo.png)
</script></section><section  data-markdown><script type="text/template">
```
$ curl "wttr.in/Strasbourg?lang=fr"
$ curl "wttr.in/Paris?lang=fr&format=v2"
$ curl "wttr.in/Wasquehal?lang=fr&format=%l:+%c+%t
```

Plein d'autres options :
 
https://github.com/chubin/wttr.in
</script></section><section  data-markdown><script type="text/template">## Quelle est votre IP ?

`curl ifconfig.co`
</script></section><section  data-markdown><script type="text/template">## Copie locale d'une vid√©o Youtube

`$ youtube-dl url`

https://github.com/ytdl-org/youtube-dl/</script></section><section  data-markdown><script type="text/template">
## Animation : fautes de frappe
 
* `gti` au lieu de `git` : https://github.com/rwos/gti
* `sl` au lieu de `ls`
</script></section><section  data-markdown><script type="text/template">
![capture sl](./data/capture-sl.png)
</script></section><section  data-markdown><script type="text/template">
#### Les interpr√©teurs de commande üêö

  * [sh](https://fr.wikipedia.org/wiki/Bourne_shell), [csh](https://fr.wikipedia.org/wiki/C_shell), [ksh](https://fr.wikipedia.org/wiki/Korn_shell): plus anciens
  * [dash ou ash](https://en.wikipedia.org/wiki/Almquist_shell#dash) : Debian Almquist shell, utilis√© √† la place de sh sous Debian
  * [bash](https://fr.wikipedia.org/wiki/Bourne-Again_shell#Usage): 
    - fusion de l'ensemble des fonctionnalit√©s pr√©sentes dans sh, csh, ksh, 
    - pr√©sents sur la majorit√© des syst√®mes, 
    - ajout de l'autocompl√©tion (touche `<TAB>`)
  * [zsh](https://en.wikipedia.org/wiki/Z_shell): par d√©faut sous MacOS √† partir de la version 10.15 (Catalina), √©tend les fonctionnalit√©s de bash
  * üê† [fish](https://en.wikipedia.org/wiki/Friendly_interactive_shell)
  
<aside class="notes"><p>On parlera principalement bash qui est pr√©sent par d√©faut sur la majorit√© des OS. 
  zsh propose des m√©canisme de gestion de l&#39;historique am√©lior√©e, recherche int√©gr√©e, possibilit√© de customiser le prompt √† droite, ...</p>
</aside></script></section><section  data-markdown><script type="text/template">
## A l'aide üöí

  - `command --help`
  - `man command` (`man man` pour apprendre √† utiliser man)
  - `man file.5` : Description du format des fichiers de configuration (exemple : `man passwd.5`)
  - [tldr.sh](https://tldr.sh/): outil √©crit en Node.js permettant de simplifier l'utilisation de man
  - [explainshell](https://explainshell.com/) : outil en ligne permettant d'expliquer une commande shell

<aside class="notes"><p>Avant de commencer, j&#39;aimerais vous rendre autonome sur la recherche d&#39;informations. G√©n√©ralement, votre syst√®me disposera de tous les outils vous permettant de comprendre une commande.</p>
</aside></script></section><section  data-markdown><script type="text/template">

## Configuration

<aside class="notes"><p>Avant de commencer √† utiliser votre terminal, il faut que vous soyez √† l&#39;aise avec celui-ci. Il y a diff√©rentes choses √† configurer qui vous rendront la vie un peu plus agr√©able (couleurs, autocompl√©tion, prompt, ...).</p>
</aside></script></section><section  data-markdown><script type="text/template">
#### Les fichiers de configuration

<aside class="notes"><p>Avant de commencer √† rentrer dans le vif sujet, il y a quelques fichiers de configuration √† conna√Ætre. Ils varieront selon votre distribution.</p>
</aside></script></section><section  data-markdown><script type="text/template">
`man bash`

![copie d'√©cran de la commande man](./data/man-load-config.png) 
</script></section><section  data-markdown><script type="text/template">
![explication sur l'ordre de chargement des fichiers de d√©marrage BASH](./data/bash-startup-files.png)


(sources : http://www.solipsys.co.uk/new/BashInitialisationFiles.html)

<aside class="notes"><p>Pas totalement vrai mais c&#39;est pour montrer la complexit√© du truc.</p>
</aside></script></section><section  data-markdown><script type="text/template">
|  Pour une configuration globale | Pour une configuration utilisateur  |
|---|---|
| /etc/profile  |   ~/.profile |
| /etc/bashrc.bashrc  |   **~/.bashrc** |
| /etc/profile.d/*.sh  |   |
</script></section><section  data-markdown><script type="text/template">### Recharger votre configuration

```
# Plusieurs options
# 1- Fermer et relancer votre terminal
# 2- Utiliser le point
. ~/.bashrc
# 3- Utiliser source
source ~/.bashrc
```
</script></section><section  data-markdown><script type="text/template">## Un peu de couleur
</script></section><section  data-markdown><script type="text/template">
Coloration syntaxique activ√©e par d√©faut sur la plupart des syst√®mes

```
# v√©rifier que la couleur est bien activ√©e
$ echo "$TERM"
xterm-256color
screen-256color # si vous utilisez tmux
```
 
```
# pour activer la couleur
~/.bashrc
export TERM="xterm-256color" 
```
<aside class="notes"><ul>
<li>Pour savoir si la coloration syntaxique est activable dans votre environnement, v√©rifier la variable d&#39;environnement $TERM</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
D√©finissez des alias pour activer la couleur sur certaines commandes 

```
~/.bash_aliases
alias ls='ls --color=auto'
alias dir='dir --color=auto'
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'
```

Les alias sont activ√©s par d√©faut sur certains environnements, pour le v√©rifier : 

```shell script
$ type -a ls
ls est un alias vers ¬´ ls --color=auto ¬ª
ls est /bin/ls
```
</script></section><section  data-markdown><script type="text/template">
Utilisateur de `VI`, installer VIM pour avoir la coloration syntaxique:

```
$ apt install vim
```

Activation de la coloration syntaxique
```
:syntax on
```

```
~/.vimrc
syntax on
```</script></section><section  data-markdown><script type="text/template">### Configurer son prompt (1/3)

```
user@machine:/path (branche extra) $ 
```

Exemple : 

```shell script
franek@micha:~/dev/pw2019-atelier-terminal (master *% u=) $ 
```

Convention du suffixe :
 - `$` utilisateur classique
 - `#` utilisateur root (super-utilisateur) 
</script></section><section  data-markdown><script type="text/template">
### Configurer son prompt (2/3)
 
```
# √† placer dans ~/.bashrc
[ -f /usr/lib/git-core/git-sh-prompt ] \ 
  && source /usr/lib/git-core/git-sh-prompt
export GIT_PS1_SHOWDIRTYSTATE=1 
export GIT_PS1_SHOWSTASHSTATE=1
export GIT_PS1_SHOWUNTRACKEDFILES=1
export GIT_PS1_SHOWUPSTREAM=verbose 
export GIT_PS1_DESCRIBE_STYLE=branch
export GIT_PS1_SHOWCOLORHINTS=1
export PROMPT_COMMAND='__git_ps1 "\u@\h:\W" " \\\$ "'
```

Source : https://delicious-insights.com/fr/articles/prompt-git-qui-dechire/
</script></section><section  data-markdown><script type="text/template">
### Configurer son prompt (3/3) : utilisation de powerline

<!-- .slide: data-background-image="data/capture-powerline.png" -->

```sudo apt install powerline powerline-gitstatus```

```
# ~/.bashrc
. /usr/share/powerline/integrations/powerline.sh
```
</script></section><section  data-markdown><script type="text/template">
### Configuration simplifi√©e

 * Oh My Bash : https://ohmybash.github.io/
 * Oh My Zsh: https://ohmyz.sh/
 * Bash-it : https://github.com/Bash-it/bash-it

<aside class="notes"><ul>
<li>Je viens de vous pr√©senter la th√©orie mais si vous ne souhaitez pas vous emb√™tez vous pouvez utiliser des outils qui int√®grent d√©j√† tout √ßa.</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
### Quelques commandes que vous devez conna√Ætre

 - `cd` : *change directory*
 - `pwd` : affiche le r√©pertoire courant
 - `tail -f fichier.log` : retourne en continue la fin d'un fichier
 - `sudo` : ex√©cute une commande en tant que root
 - `passwd` : modification d'un mot de passe
 - `ls` : pour lister les fichiers/r√©pertoires dans un r√©pertoire
 - `curl` : pour faire des requ√™tes HTTP
</script></section><section  data-markdown><script type="text/template">
## Alias

Lister les alias : <!-- .element style="text-align:left;" -->

`$ alias`

Ajouter un alias temporaire : <!-- .element style="text-align:left;" -->


`$ alias whatsmyip="curl https://ifconfig.co/"`

Ajouter des alias permanents : <!-- .element style="text-align:left;" -->


```
# ~/.bash_aliases
alias whatsmyip="curl https://ifconfig.co/"
alias meteo='curl "wttr.in/Strasbourg?lang=fr"'
# permet d'ouvrir un fichier avec le logiciel le plus adapt√©
alias open="xdg-open"
alias top_process="ps -eo pcpu,pid,user,args | sort -k 1 -r | head -10"
```
</script></section><section  data-markdown><script type="text/template">
<!-- .slide: data-background-video="data/tabulation.mp4" -->
### Autocompl√©tion (1/2)

Touche \<TAB\> pour compl√©ter vos commandes (path, nom de fichiers, ...)

<aside class="notes"><video width="800" height="440" controls autoplay>
   <source src="data/tabulation.mp4" type="video/mp4">
 </video></aside></script></section><section  data-markdown><script type="text/template">
### Autocompl√©tion (2/2)

Fonctionne √©galement sur d'autres commandes (`git`, `ssh`).
 
Les fichiers de configuration de l'autocompl√©tion sont √† placer dans /etc/bash_completion.d/.

(possibilit√© d'ajouter des fichiers d'autocompletion custom)
</script></section><section  data-markdown><script type="text/template">
### Raccourcis claviers (1/2)

  * `CTRL + u` : couper tout ce qui est √† gauche
  * `CTRL + w` : suppression du mot avant (couper)
  * `CTRL + y` : coller ce qui a √©t√© coup√© par `CTRL + w/u`
  * `CTRL + e` : va a la fin    
  * `CTRL + a` : va au d√©but
  * `CTRL + l` : clear
  * `CTRL + d` : exit
</script></section><section  data-markdown><script type="text/template">
### Raccourcis claviers (2/2)

`man readline` pour une liste plus compl√®te.

Par d√©faut, bash utilise les raccourcis "emacs" (`set -o emacs`).

<aside class="notes"><ul>
<li>Si vous ne devez retenir que quelques petites choses, ce sont les raccourcis clavier.</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">### `history` : recherche

* `history` : liste de l'historique des commandes ex√©cut√©es
* historique sauvegard√© dans : `~/.history` 
* Raccourci clavier : `CTRL + r`
* Configuration possible : 

```
# don't put duplicate lines or lines starting with space in the history.
# See bash(1) for more options
HISTCONTROL=ignoreboth

# append to the history file, don't overwrite it
shopt -s histappend

# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)
HISTSIZE=1000
HISTFILESIZE=2000
HISTFILESIZE=2000
```
</script></section><section  data-markdown><script type="text/template">### `history` : raccourcis

`man history`

```
!      Start a history substitution, except when followed by a blank, newline, = or (.
!n     Refer to command line n.
!-n    Refer to the current command minus n.
!!     Refer to the previous command.  This is a synonym for `!-1'.
!string Refer to the most recent command preceding the current position in the history list starting with string.
!?string[?] Refer to the most recent command preceding the current position in the history list containing string.  The trailing ? may be omitted if string is followed immediately by a newline.
^string1^string2^ Quick substitution.  Repeat the last command, replacing string1 with string2.  Equivalent to ``!!:s/string1/string2/'' (see Modifiers below).
!#     The entire command line typed so far.

```
</script></section><section  data-markdown><script type="text/template">
### `history` : utilisation de `fzf`

Possibilit√© d'am√©liorer l'affichage de `CTRL + r` avec [fzf](https://github.com/junegunn/fzf)

```
$ sudo apt install fzf
# ~/.bashrc
[-f /usr/share/doc/fzf/examples/key-bindings.bash ] \
&& source /usr/share/doc/fzf/examples/key-bindings.bash
```
</script></section><section  data-markdown><script type="text/template">
### Copier/Coller : s√©lection avec la souris

 `CTRL + SHIFT + c/v`
  </script></section><section  data-markdown><script type="text/template">
### Copier/Coller : depuis un script
  
`pbcopy` (MacOS) | `xclip` (Linux)

```
alias pbcopy='xclip -selection clipboard'
alias pbpaste='xclip -selection clipboard -o'
```

Exemple :

`$ otp arteext | pbcopy` : permet de copier/coller dans le presse papier le r√©sultat de otp arteext.
</script></section><section  data-markdown><script type="text/template">## Gestion des processus

 * `command &` : permet d'ex√©cuter une commande en arri√®re plan
 * `CTRL + c` : tuer un processus
 * `CTRL + z` : stopper une application en arri√®re plan
 * (`bg 1` pour activer la t√¢che en arri√®re plan, `fg 1` pour la remettre au premier plan)

<aside class="notes"><ul>
<li><code>CTRL + c</code> : A utiliser quand vous √™tes coinc√©s, <code>vim</code> est un contre-exemple</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
### Executer une t√¢che en t√¢che de fond (background) (1/2)
  
  * utilisation de `&`  (inconv√©nient : si la session est ferm√©e - perte connexion SSH -, la commande s'arr√™te).
  
  `$ sleep 300 &`
  
  * utilisation de nohup 
  
  `$ nohup sleep 300 &  `
</script></section><section  data-markdown><script type="text/template">
<!-- .slide: data-background-image="data/tmux-perso.png" -->

### Executer une t√¢che en t√¢che de fond (background) (2/2)
  
`tmux` ou `screen` (legacy)
    </script></section><section  data-markdown><script type="text/template">
### tmux : pr√©sentation

https://github.com/tmux/tmux

 * multiplexeur de terminal (a.k.a des onglets dans le terminal)
 * √©volution de [GNU Screen](https://www.gnu.org/software/screen/)
 * utilisation d'un pr√©fixe (combinaison de touches - par d√©faut : CTRL+b) pour r√©aliser des actions.
 * persistence des sessions
 </script></section><section  data-markdown><script type="text/template">
### tmux : raccourcis

 * lister les sessions : `tmux ls`
 * se connecter √† la sessions : `tmux at -t 0`
 * quitter tmux et laisser les sessions ouvertes: `CTRL+b + d` 
 * nouvelle session: `CTRL+b + :new title`
 * splitter les fen√™tres : `CTRL+b + %` / `CTRL+b + "`
 * lister les fen√™tres : `CTRL+b + w`
 * renommer l'onglet (`window`) : `CTRL+b + ,`
 * renommer la fen√™tre (`session`) : `CTRL+b $`
 
[Tmux Cheat Sheet](https://tmuxcheatsheet.com/)
</script></section><section  data-markdown><script type="text/template">
### tmux : configuration

```
# ~/.tmux.conf
# load powerline configuration (apt install powerline)
source "/usr/share/powerline/bindings/tmux/powerline.conf"

# force a reload of the config file with CTRL+b r
unbind r
bind r source-file ~/.tmux.conf

# start window numbering at 1 for easier switching
set -g base-index 1

# Switch windows 
# usage: "SHIFT+arrow" (without prefix key)
bind -n S-Left  previous-window
bind -n S-Right next-window
```
</script></section><section  data-markdown><script type="text/template">
### tmux : copier-coller

* `CTRL+b [`: activation du visual mode
* `v`: pour s√©lectionner le texte
* `y`: pour copier la s√©lection
* `CTRL+b P`: pour coller

```
set-window-option -g mode-keys vi
bind P paste-buffer
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -i"
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle
```

https://romainpellerin.eu/copy-pasting-in-tmux-and-vim.html</script></section><section  data-markdown><script type="text/template">
### tmux : interaction avec vim

`sudo apt install vim-gnome`

```
" Make vim use the system clipboard:
set clipboard^=unnamed,unnamedplus
" Prevent vim from clearing system clipboard buffer
autocmd VimLeave * call system("xsel -ib", getreg('+'))
```
</script></section><section  data-markdown><script type="text/template">
### tmux : d√©marrage

```
# ~/.bashrc
# D√©marre toujours tmux lors de l'ouverture d'un terminal
if [ -z "$TMUX" ]; then
    tmux attach -t default || tmux new -s default
fi
```
</script></section><section  data-markdown><script type="text/template">
# git 

<aside class="notes"><ul>
<li>configurer votre prompt pour avoir un contexte (voir plus haut)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
#### git : configuration

 * configuration :
   - syst√®me : `/etc/gitconfig` 
   - global : `~/.gitconfig`
   - par projet : `projet/.gitconfig` (surcharge configuration globale)

 * Tr√®s bonne ressource: [Une configuration Git aux petits oignons - Delicious Insights](https://delicious-insights.com/fr/articles/configuration-git/)
 
<aside class="notes"><p>La configuration de git se fait dans le fichier <code>.gitconfig</code>.</p>
</aside></script></section><section  data-markdown><script type="text/template">#### git : de la couleur

```shell script
# ~/.gitconfig
[color]
ui = true
```
</script></section><section  data-markdown><script type="text/template">#### git : un .gitignore global

```shell script
# ~/.gitconfig
[core]
excludesfile = ~/.gitignore_global
```

```
#  ~/.gitignore_global
Thumbs.db
desktop.ini
*.bak
*.swp
*.swo
*~
*#
.vscode
.idea
*.sublime-workspace
```
</script></section><section  data-markdown><script type="text/template">#### git : alias

```shell script
# .gitconfig
[alias]
co = checkout
st = status
ci = commit
ls = log --pretty=format:'%C(yellow)%h%Creset %ar\t| %Cgreen%an%Creset - %s'
lg = log --graph --pretty=tformat:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%an %ar)%Creset'
wc = whatchanged -p --abbrev-commit --pretty=medium
authors = shortlog -s
lsmy = !(git ls --author="$(git config user.email)")
# r√©cup√©rer une PR. ex.: git get-pr 5
get-pr = "!f() { hub pr checkout "$1"; }; f"
``` 
Plein de chouettes alias chez [Lyrixx](https://github.com/lyrixx/dotfiles/blob/master/.gitconfig#L4)
</script></section><section  data-markdown><script type="text/template">
#### git : choisir votre √©diteur

Par d√©faut, utilisation de la variable d'environnement : <!-- .element style="text-align:left;" --> 

`$EDITOR`

Possibilit√© de surcharger cette configuration :  <!-- .element style="text-align:left;" -->


`$ git config --global core.editor "vim"`

```
# ~/.gitconfig
[core]
        editor = vim
        # Atom
        # editor = atom --wait
        # Sublime
        # editor = subl -w
        # Visual Studio Code
        # editor = code -w
```
</script></section><section  data-markdown><script type="text/template">#### git : autre configuration

```shell script
[push]
# Utilise le m√™me nom de branche local et distant
# https://git-scm.com/docs/git-config#Documentation/git-config.txt-pushdefault
default = current

[pull]
# Effectue un rebase lors du pull - √©quivalent √† git pull --rebase
# https://git-scm.com/docs/git-config#Documentation/git-config.txt-pullrebase
rebase = preserve

[rebase]
# stash les modifications en cours avant d'effectuer le rebase
autostash = true

[tag]
# Tri les tags dans un ordre naturel
sort = version:refname
        
[branch]
# tri les branches par date de dernier commit
sort = committerdate
``` 
</script></section><section  data-markdown><script type="text/template">### hub

https://hub.github.com/
 * outil de github permettant d'interagir avec github
 * lister les issues/pull-requests: `git pr list`
 * r√©cup√©rer le contenu d'une PR: `git pr checkout 12`
 * cr√©er des PR: `git pull-request --push`
 * cr√©er des releases, ...
</script></section><section  data-markdown><script type="text/template">### git : clone en mode SSH (1/2)

`git clone git@github.com:symfony/symfony.git`<br />
√† la place de<br />
`git clone https://github.com/symfony/symfony.git`<br />

<aside class="notes"><p>Github pr√©sente par d√©faut la possibilit√© de cloner en utilisant https. C&#39;est tr√®s bien. C&#39;est plus facile de r√©cup√©rer un d√©p√¥t en HTTPS (firewall, ...) mais on perd plein de fonctionnalit√©s. Cela nous oblige √† saisir le mot de passe r√©guli√®rement. Il est pr√©f√©rable d&#39;utiliser SSH.</p>
</aside></script></section><section  data-markdown><script type="text/template">### git : clone en mode SSH (2/2)

```
# g√©n√©rer votre cl√© SSH
$ ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
# utiliser une passphrase
``` 

Uploader [la cl√© sur github](https://github.com/settings/keys)

```
$ ssh -T git@github.com
Hi franek! You've successfully authenticated, but GitHub does not provide shell access.
```

Aide: https://help.github.com/en/articles/connecting-to-github-with-ssh
</script></section><section  data-markdown><script type="text/template">
# SSH

 * Protocole √† privil√©gier
 * Utilisation du port 22
 * N'utilisez plus telnet ou FTP
</script></section><section  data-markdown><script type="text/template">
### SSH : ssh-copy-id

Copier votre cl√© SSH sur un serveur distant:

`$ ssh-copy-id user@server`

* va ajouter la cl√© SSH dans le fichier `./ssh/authorized_keys` du serveur distant
* le mot de passe ne sera plus n√©cessaire pour acc√©der au serveur.
</script></section><section  data-markdown><script type="text/template">
### SSH : cr√©ation d'alias

```
# ~/.ssh/config
Host projet1
Hostname W.X.Y.Z
Port 2223
User client1
```

`$ ssh projet1`

* Simplification de la configuration
* Permet l'autocompl√©tion (`ssh pro\<TAB\>`) 
</script></section><section  data-markdown><script type="text/template">
### SSH : parallel-ssh
 
Permet d'effectuer des t√¢ches similaires sur plusieurs serveurs:
 
```
$ sudo apt-get install pssh
$ parallel-ssh -i -H user@server1 -H user@server2 -H user@server3 hostname
```
</script></section><section  data-markdown><script type="text/template">
### SSH : bastion SSH (1/2)

![Bastion SSH par Octo](./data/bastion-ssh.png) <!-- .element style="background-color:white;" -->
</script></section><section  data-markdown><script type="text/template">
### SSH : bastion SSH (2/2)

```
# ~/.ssh/config
Host service1
Hostname W.X.Y.Z # IP priv√©e du service prot√©g√©
Port 22
ProxyCommand ssh user@bastion nc %h %p 2> /dev/null
# Possibilit√© de le remplacer par ProxyJump
```

Connexion automatique au serveur prot√©g√© via un rebond sur le bastion SSH.

`$ ssh service1`  

[Octo: Back to Basics : Le Bastion SSH](https://blog.octo.com/le-bastion-ssh/)
</script></section><section  data-markdown><script type="text/template">
### SSH : tunnel SSH avec redirection de port

Cr√©ation d'un proxy SOCKS

`ssh -nvNT -C -D 1080 user@mon_serveur_distant`

Configurer votre navigateur pour utiliser ce proxy.

Autre solution : [sshutle](https://github.com/sshuttle/sshuttle)

```
$ apt-get install sshuttle
$ sshuttle --dns -r user@serveur 0/0
``` 
</script></section><section  data-markdown><script type="text/template">
### Dotfiles de la communaut√©

 * https://dotfiles.github.io/: communaut√© de fichiers de configurations (dotfiles)
 * [chezmoi](https://github.com/twpayne/chezmoi): outil permettant de g√©rer ses dotfiles
</script></section><section  data-markdown><script type="text/template">
### Autres outils chouettes

  * `python -m SimpleHTTPServer` : publier un site web rapidement  ([doc Mozilla](https://developer.mozilla.org/en-US/docs/Learn/Common_questions/set_up_a_local_testing_server#Running_a_simple_local_HTTP_server))
  * `nmap` : pour lister les ports ouverts
  * [mitmproxy](https://mitmproxy.org/) : proxy permettant d'analyser le trafic 
  * `dig` : pour requ√™ter le DNS
  * ... (et plein d'autres choses)
</script></section><section  data-markdown><script type="text/template">
## Aller plus loin

<!-- .slide: data-background-image="data/the-art-of-command-line.png" style="background-color:black;padding:10px;" -->
 
https://github.com/jlevy/the-art-of-command-line
  </script></section><section  data-markdown><script type="text/template">
### Fran√ßois Dume  @\_franek\_ 

 * JoliCode / ARTE GEIE (Strasbourg)
 * expertise Symfony, API, DevOps
 * team #velotaf #cargo
 * mes dotfiles : https://github.com/franek/dotfiles</script></section><section  data-markdown><script type="text/template">
## Merci
</script></section><section  data-markdown><script type="text/template">
Credits :

* [Photo by Milind Kaduskar on Unsplash](https://unsplash.com/photos/pzKb6pAIL94)
</script></section></div>
    </div>
    <footer>
    Atelier Paris Web 2019 - N'ayez plus peur de votre terminal ! - Fran√ßois DUME - @_franek_ - 2019
    </footer>

    <script src="./js/reveal.js"></script>

    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // Optional libraries used to extend on reveal.js
      var deps = [
        { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: './plugin/zoom-js/zoom.js', async: true },
        { src: './plugin/notes/notes.js', async: true },
        { src: './plugin/math/math.js', async: true }
      ];

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        dependencies: deps
      };

      // options from URL query string
      var queryOptions = Reveal.getQueryHash() || {};

      var options = extend(defaultOptions, {}, queryOptions);
    </script>

    <script src="./_assets/assets/asciinema-2.6.1/asciinema-player.js"></script>

    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>

